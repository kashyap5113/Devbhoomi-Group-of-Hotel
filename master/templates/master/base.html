{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Master Control Â· Dwarka Getaways{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.4/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'master/css/master-dashboard.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body class="admin-master font-space bg-night text-gray-100 min-h-screen">
<div class="master-shell">
    <aside class="master-sidebar">
        <div class="sidebar-brand">
            <div class="brand-mark">DG</div>
            <div>
                <p class="brand-label">Dwarka Getaways</p>
                <p class="brand-sub">Master Console</p>
            </div>
        </div>
        {% with current=request.resolver_match.url_name|default:'' %}
        <nav class="sidebar-nav" aria-label="Master navigation">
            <a href="{% url 'master:dashboard' %}" class="sidebar-link {% if current == 'dashboard' %}active{% endif %}">
                <span class="bi bi-bar-chart"></span>
                <span>Dashboard</span>
            </a>
            {% if perms.hotels.view_hotel %}
            <a href="{% url 'master:hotels' %}" class="sidebar-link {% if current|slice:":5" == 'hotel' %}active{% endif %}">
                <span class="bi bi-building"></span>
                <span>Hotels</span>
            </a>
            {% endif %}
            {% if perms.hotels.view_roomtype %}
            <a href="{% url 'master:rooms-hub' %}" class="sidebar-link {% if 'room' in current %}active{% endif %}">
                <span class="bi bi-door-open"></span>
                <span>Rooms</span>
            </a>
            {% endif %}
            {% if perms.hotels.view_amenity %}
            <a href="{% url 'master:amenities' %}" class="sidebar-link {% if 'amenit' in current %}active{% endif %}">
                <span class="bi bi-stars"></span>
                <span>Amenities</span>
            </a>
            {% endif %}
            <a href="#" class="sidebar-link disabled">
                <span class="bi bi-gear"></span>
                <span>Settings</span>
            </a>
        </nav>
        {% endwith %}
        <div class="sidebar-footer">
            <div class="text-sm text-muted">Need help?</div>
            <a href="mailto:support@dwarkagetaways.com" class="support-link">support@dwarkagetaways.com</a>
        </div>
    </aside>

    <div class="master-main">
        <header class="master-topbar">
            <div>
                <p class="text-muted uppercase tracking-wide text-xs">Master Panel</p>
                <h1 class="page-heading">{% block page_heading %}Overview{% endblock %}</h1>
            </div>
            <div class="topbar-actions">
                {% if request.user.is_authenticated %}
                <div class="user-pill">
                    <div class="avatar">{{ request.user.first_name|default:request.user.username|slice:":1" }}</div>
                    <div>
                        <p class="text-sm fw-semibold">{{ request.user.get_full_name|default:request.user.username }}</p>
                        <p class="text-xs text-muted">{{ request.user.email|default:"client@dwarka" }}</p>
                    </div>
                </div>
                <a href="{% url 'users:logout' %}" class="btn btn-peach">Logout</a>
                {% endif %}
            </div>
        </header>

        <main class="master-content" id="content">
            {% block content %}{% endblock %}
        </main>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
